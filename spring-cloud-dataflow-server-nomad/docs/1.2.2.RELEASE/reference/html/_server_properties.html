<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>12.&nbsp;Server Properties</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Spring Cloud Data Flow Server for Nomad"><link rel="up" href="server.html" title="Part&nbsp;V.&nbsp;Server Implementation"><link rel="prev" href="server.html" title="Part&nbsp;V.&nbsp;Server Implementation"><link rel="next" href="deployment.html" title="Part&nbsp;VI.&nbsp;Deployment Properties"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12.&nbsp;Server Properties</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="server.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;V.&nbsp;Server Implementation</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="deployment.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="_server_properties" href="#_server_properties"></a>12.&nbsp;Server Properties</h2></div></div></div><p>The following properties can be used to configure the Data Flow Nomad Server.</p><div class="informaltable"><table class="informaltable" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Name</th><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Usage Example</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Description</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>API Hostname/IP</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.nomadHost=nomad-client.cluster.com</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The hostname/IP address where a Nomad client is listening. Default is <code class="literal">localhost</code></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>API Port</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.nomadPort=14646</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The port where a Nomad client is listening. Default is <code class="literal">4646</code></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Region</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.region=eu-west</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The region to deploy apps into. Default to <code class="literal">global</code>. See <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#Region" target="_top">here</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Datacenters</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.datacenters=dc1,dc2</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>A comma separated list of datacenters that should be targeted for deployment. Default value is <code class="literal">dc1</code>. See <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#Datacenters" target="_top">here</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Priority</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.priority=25</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The default job priority. Default value is 50. See <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#Priority" target="_top">here</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Environment Variables</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.environmentVariables=ENV_VAR_1=test</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Common environment variables to set for any deployed app.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Expose app via Fabio</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.exposeViaFabio=true</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Flag to indicate whether an app should be exposed via <a class="link" href="https://github.com/eBay/fabio" target="_top">Fabio</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>HTTP Health Check - Path</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.checkHttpPath=/management/health</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#Path" target="_top">path</a> of the HTTP endpoint which Consul (if available) will query to query the health</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>HTTP Health Check - Interval</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.checkInterval=60000</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>This indicates the frequency of the health checks that Consul will perform. Specified in milliseconds. See <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#Interval" target="_top">here</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>HTTP Health Check - Timeout</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.checkTimeout=14646</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>This indicates how long Consul will wait for a health check query to succeed. Specified in milliseconds. See <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#Timeout" target="_top">here</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Resource - CPU</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.resources.cpu=500</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#" target="_top">CPU</a> required in MHz. Default is 1000MHz</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Resource - Memory</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.resources.memory=1024</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#MemoryMB" target="_top">memory</a> required in MB. Default is 512MB</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Resource - Network</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.resources.networkMBits=100</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The number of <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#MBits" target="_top">MBits</a> in bandwidth required</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Ephemeral Disk - Sticky</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.resources.ephemeralDisk.sticky=false</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Specifies that Nomad should make a best-effort attempt to place the updated allocation on the same machine. See <a class="link" href="https://www.nomadproject.io/docs/job-specification/ephemeral_disk.html#sticky" target="_top">here</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Ephemeral Disk - Migrate</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.ephemeralDisk.migrate=false</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Specifies that the Nomad client should make a best-effort</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Ephemeral Disk - Size</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.ephemeralDisk.size=500</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Specifies the size of the ephemeral disk in MB</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Logging - Max Files</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.loggingMaxFiles=2</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#MaxFiles" target="_top">maximum number of rotated files</a> Nomad will retain. The default is 1 log file retention size</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Logging - Max File Size</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.loggingMaxFileSize=20</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#MaxFileSizeMB" target="_top">size</a> of each rotated file. The size is specified in MB. The default is 10MB max log file size</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Restart Policy - Delay</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.restartPolicyDelay=10000</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>A duration to wait before restarting a task. Specified in milliseconds. Default is 30000 milliseconds (30 seconds). See <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#Delay" target="_top">here</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Restart Policy - Interval</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.restartPolicyInterval=5000</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The Interval begins when the first task starts and ensures that only X number of attempts number of. Specified in milliseconds. Default is 120000 milliseconds (120 seconds / 3 minutes). See <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#Interval" target="_top">here</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Restart Policy - Attempts</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.restartPolicyAttempts=1</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Attempts is the number of restarts allowed in an Interval. Default is 3 attempts within 3 minutes. See <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#Attempts" target="_top">here</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Restart Policy - Mode</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.restartPolicyMode=1</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Mode is given as a string and controls the behavior when the task fails more than X number of attempts times in an Interval. Default value is <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#delay" target="_top">"delay"</a>. See <a class="link" href="https://www.nomadproject.io/docs/jobspec/json.html#Mode" target="_top">here</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Docker - Entrypoint Style</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.entryPointStyle=shell</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Entry point style used for the Docker image. To be used to determine how to pass in properties</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Docker - Volumes</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.volumes=/var/test:/test</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>A comma separated list of <code class="literal">host_path:container_path</code> values. See <a class="link" href="https://www.nomadproject.io/docs/drivers/docker.html#volumes" target="_top">here</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Maven - Artifact Destination</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.artifactDestination=local/app</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The destination (path) where artifacts will be downloaded by default. Default value is <code class="literal">local</code>. See <a class="link" href="https://www.nomadproject.io/docs/job-specification/artifact.html#destination" target="_top">here</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Maven - Java Options</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.javaOpts=-Xms64m,-Xmx128m</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>A comma separated list of default Java options to pass to the JVM. Only applicable to the Maven resource deployer implementation. See <a class="link" href="http://docs.spring.io/spring-cloud-dataflow/docs/current/reference/htmlsingle/index.html#getting-started-application-configuration" target="_top">for reference</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Maven - Deployer Scheme</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.deployerScheme=https</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The URI scheme that the deployer server is running on. When deploying Maven resource based apps the artifact source URL includes the servers host and port. This property value is used when constructing the source URL. See <a class="link" href="https://www.nomadproject.io/docs/job-specification/artifact.html#source" target="_top">here</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Maven - Deployer Host</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.deployerHost=scdf-nomad.cluster.com</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The resolvable hostname of IP address that the deployer server is running on. When deploying Maven resource based apps the artifact source URL includes the servers host and port. This property value is used when constructing the source URL. See <a class="link" href="https://www.nomadproject.io/docs/job-specification/artifact.html#source" target="_top">here</a></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Maven - Deployer Port</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.deployerPort=443</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The port that the deployer server is listening on. When deploying Maven resource based apps the artifact source URL includes the servers host and port. This property value is used when constructing the source URL. See <a class="link" href="https://www.nomadproject.io/docs/job-specification/artifact.html#source" target="_top">here</a></p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p>Maven - Minimum Java Version</p></td><td style="border-right: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.cloud.deployer.nomad.minimumJavaVersion=1.7</code></p></td><td style="" align="left" valign="top"><p>If set, the allocated node must support at least this version of a Java runtime environment. E.g. '1.8' for a minimum of a Java 8 JRE/JDK. See <a class="link" href="https://www.nomadproject.io/docs/drivers/java.html#driver_java_version" target="_top">here</a></p></td></tr></tbody></table></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="server.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="server.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="deployment.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Part&nbsp;V.&nbsp;Server Implementation&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Part&nbsp;VI.&nbsp;Deployment Properties</td></tr></table></div></body></html>